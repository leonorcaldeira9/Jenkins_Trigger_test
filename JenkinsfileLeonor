pipeline {
 agent any

 environment {
        BASE_API_URL = "https://1ce2-193-137-229-131.ngrok-free.app/api/TestCases"
    }

 stages {
    stage('Run Test 1') {
            steps {
                script {
                    def response = httpRequest(url: "${env.BASE_API_URL}?testId=1")
                    echo "Response from Test 1: ${response.content}"
                    validResponseCodes: '100:599'
                }
            }
        }
    stage('Run Test 2') {
            steps {
                script {
                    def response = httpRequest(url: "${env.BASE_API_URL}?testId=2")
                    echo "Response from Test 2: ${response.content}"
                    validResponseCodes: '100:599'
                }
            }
        }
    stage('Run Test 3') {
            steps {
                script {
                    def response = httpRequest(url: "${env.BASE_API_URL}?testId=3")
                    echo "Response from Test 3: ${response.content}"
                    validResponseCodes: '100:599'
                }
            }
        }
 }

 triggers {
    githubPush()
 }

 post {
        always {
            echo 'The pipeline has completed'
        }
    }
}